/*
 * knockout-paged-list v1.0.5
 * A KnockoutJS Plugin for Paged List/Grid
 * @repository https://github.com/uNkNowN92-git/knockout-paged-list.git
 * @license ISC
 */
var PagedList=function(e){return function(e){function r(){e&&(m.defaultUrl=void 0!==e.url?e.url:m.defaultUrl,m.queryOnLoad=void 0!==e.queryOnLoad?e.queryOnLoad:m.queryOnLoad,m.defaultEntriesPerPage=void 0!==e.entriesPerPage?e.entriesPerPage:m.defaultEntriesPerPage,m.clearLoadedDataOnError=void 0!==e.clearLoadedDataOnError?e.clearLoadedDataOnError:m.clearLoadedDataOnError,m.queryOnFilterChangeOnly=void 0!==e.queryOnFilterChangeOnly?e.queryOnFilterChangeOnly:m.queryOnFilterChangeOnly)}function t(){return 1===m.requestedPage()&&m.entriesPerPage()===m.totalEntries()}function n(){a()?(m.requestedPage(1),m.entriesPerPage(m.defaultEntriesPerPage),s()):m.queryOnFilterChangeOnly===!1?s():m.sortOnly()?s():o()?s():m.currentPage(m.requestedPage())}function a(){var e={};return $.extend(e,[m.filter()][0]),ko.toJSON(e)!=ko.toJSON(m.appliedFilter())?(m.appliedFilter(e),!0):!1}function o(){return m.loadedEntriesCount()<m.totalEntriesOnNextPage()&&m.loadedEntriesCount()!=m.totalEntries()}function u(e){var r=void 0!==e?$(e.target).data("url"):void 0;m.setUrl(r)}function i(e){return void 0!==e?$(e.target).data("sort-field"):void 0}function s(){if(void 0!==m.url()){l(),m.loading(!0),m.error([]);var e=c();m.request=$.ajax({url:m.url(),method:"get",dataType:"json",data:e,success:P,error:E,beforeSend:d}).always(function(){m.loading(!1)})}}function l(){m.request&&4!==m.request.readyState&&m.request.abort()}function d(e){$.each(m.headers(),function(r,t){e.setRequestHeader(r,t)})}function c(){var e={page:m.requestedPage(),perPage:m.entriesPerPage(),currentEntries:m.loadedEntriesCount(),showAll:t()};return m.activeSort()&&$.extend(e,{sortBy:m.activeSort().column,sortAsc:m.activeSort().asc,sortOnly:m.sortOnly()}),$.extend(e,m.filter()),delete e.updateItems,e}function P(e){e.data.length>0&&(g(e),m.currentPage(m.requestedPage())),v(e.details),m.error([])}function g(e){var r=O(e.details.totalEntries);r.updateItems(0,m.data()),m.sortOnly()?(r.updateItems(0,e.data),m.sortOnly(!1)):r.updateItems(y(),e.data),m.data(r),f(r[0])}function f(e){if(0===m.columns().length||m.queryOnFilterChangeOnly===!1){var r=$.map(e,function(e,r){return r});m.columns(r)}}function v(e){0===e.totalEntries&&m.data([]),m.totalEntries(e.totalEntries)}function E(e,r,t){m.error({jqXHR:e,status:r,error:t}),m.appliedFilter([]),m.clearLoadedDataOnError&&m.data([])}function p(){return(m.currentPage()-1)*m.entriesPerPage()}function y(){return(m.requestedPage()-1)*m.entriesPerPage()}function O(e){return $.map(Array.apply(null,Array(e)),function(){return{}})}function q(e){return $.map(e,function(e,r){return $.isEmptyObject(e)?void 0:r}).length}function b(){void 0!==m.defaultUrl&&(m.setUrl(m.defaultUrl),m.queryOnLoad&&m.getList())}var m=this;Array.prototype.updateItems=function(e,r){void 0!==r&&Array.prototype.splice.apply(this,[e,r.length].concat(r))},m.defaultUrl=void 0,m.queryOnLoad=!0,m.defaultEntriesPerPage=5,m.clearLoadedDataOnError=!1,m.queryOnFilterChangeOnly=!0,m.request=void 0,r(),m.url=ko.observable(),m.data=ko.observableArray(),m.currentPage=ko.observable(1),m.requestedPage=ko.observable(1),m.entriesPerPage=ko.observable(m.defaultEntriesPerPage),m.totalEntries=ko.observable(0),m.headers=ko.observableArray(),m.error=ko.observableArray(),m.loading=ko.observable(!1),m.filter=ko.observableArray(),m.appliedFilter=ko.observableArray(),m.columns=ko.observableArray(),m.sortOnly=ko.observable(!1),m.activeSort=ko.observableArray(),m.entries=ko.computed(function(){var e=p();return m.data.slice(e,e+m.entriesPerPage())}),m.hasEntries=ko.computed(function(){return m.totalEntries()>0}),m.totalPages=ko.computed(function(){var e=Math.ceil(m.totalEntries()/m.entriesPerPage());return e>0?e:1}),m.previousEnabled=ko.computed(function(){return 1!==m.currentPage()&&m.loading()===!1}),m.nextEnabled=ko.computed(function(){return m.currentPage()!==m.totalPages()&&m.loading()===!1}),m.showFirstEntriesEnabled=ko.computed(function(){return m.hasEntries()&&m.totalEntries()>m.defaultEntriesPerPage&&m.loading()===!1}),m.firstEntriesCount=ko.computed(function(){return m.totalEntries()<m.entriesPerPage()?m.totalEntries():m.defaultEntriesPerPage}),m.previousItemsCount=ko.computed(function(){return m.defaultEntriesPerPage}),m.nextItemsCount=ko.computed(function(){return m.totalPages()-m.currentPage()==1?m.totalEntries()-m.entriesPerPage()*(m.totalPages()-1):m.defaultEntriesPerPage}),m.loadedEntriesCount=ko.computed(function(){return q(m.data())}),m.shownAll=ko.computed(function(){return m.entriesPerPage()>=m.totalEntries()}),m.totalEntriesOnNextPage=function(){return m.requestedPage()*m.entriesPerPage()},m.hasError=ko.computed(function(){return 0!==m.error().length}),m.errorCode=ko.computed(function(){return void 0!==m.error().jqXHR?m.error().jqXHR.status:null}),m.parserError=ko.computed(function(){return void 0!==m.error().status?"parsererror"===m.error().status:!1}),m.firstPage=function(){m.requestedPage(1),n()},m.lastPage=function(){},m.next=function(){m.currentPage()<m.totalPages()&&(m.requestedPage(m.currentPage()+1),n())},m.previous=function(){m.currentPage()>1&&(m.requestedPage(m.currentPage()-1),n())},m.showFirstEntries=function(){m.requestedPage(1),m.entriesPerPage(m.defaultEntriesPerPage),n()},m.showAll=function(){m.requestedPage(1),m.entriesPerPage(m.totalEntries()),n()},m.sort=function(e,r,t){if(void 0!==m.columns()&&!(m.totalEntries()<=1)&&(void 0!==t?u(t):(u(r),e=i(r)),-1!==$.inArray(e,m.columns()))){var a={column:e,asc:!0};m.activeSort().column===e&&(a.asc=!m.activeSort().asc),m.activeSort(a),m.sortOnly(!0),n()}},m.setUrl=function(e){m.url(void 0!==e?e:m.defaultUrl)},m.getList=function(e,r){m.requestedPage(1),u(r),n()},b()}}();