var PagedList=function(e){return function(e){function t(){r()?(f.requestedPage(1),f.entriesPerPage(f.defaultEntriesPerPage),o()):f.sortOnly()?(o(),f.sortOnly(!1)):n()?o():f.currentPage(f.requestedPage())}function r(){var e=!1,t={};return $.extend(t,[f.filter()][0]),ko.toJSON(t)!=ko.toJSON(f.appliedFilter())&&(f.appliedFilter(t),e=!0),e}function n(){return f.loadedEntriesCount()<f.totalEntriesOnNextPage()&&f.loadedEntriesCount()!=f.totalEntries()}function a(e){var t=$(e.target).data("url");f.setUrl(t)}function o(){if(void 0!==f.url()){f.loading(!0);var e=u();$.getJSON(f.url(),e,function(e){s(e)}).fail(P).always(function(){f.loading(!1)})}}function u(){var e={page:f.requestedPage(),perPage:f.entriesPerPage(),currentEntries:f.loadedEntriesCount(),showAll:i()};return f.activeSort()&&$.extend(e,{sortBy:f.activeSort().column,sortAsc:f.activeSort().asc,sortOnly:f.sortOnly()}),$.extend(e,f.filter()),e}function i(){return 1===f.requestedPage()&&f.entriesPerPage()===f.totalEntries()}function s(e){e.data.length>0&&(l(e.data),f.currentPage(f.requestedPage())),d(e.details),f.error([])}function l(e){var t=f.requestedPage()>f.currentPage();t?(ko.utils.arrayPushAll(f.data(),e),f.data.valueHasMutated(),f.currentPage()<f.totalPages()&&f.currentPage(f.currentPage()+1)):(c(e[0]),f.data(e))}function d(e){0===e.totalEntries&&f.data([]),f.totalEntries(e.totalEntries)}function c(e){if(0===f.header().length){var t=$.map(e,function(e,t){return t});f.header(t)}}function P(e,t,r){f.error({jqXHR:e,status:t,error:r}),f.appliedFilter([])}function g(){void 0!==f.defaultUrl&&(f.setUrl(f.defaultUrl),f.queryOnLoad&&f.getList())}var f=this;f.queryOnLoad=void 0!==e.queryOnLoad?e.queryOnLoad:!0,f.defaultEntriesPerPage=e.entriesPerPage||5,f.defaultUrl=e.url,f.url=ko.observable(),f.data=ko.observableArray(),f.currentPage=ko.observable(1),f.requestedPage=ko.observable(1),f.entriesPerPage=ko.observable(f.defaultEntriesPerPage),f.totalEntries=ko.observable(0),f.error=ko.observableArray(),f.loading=ko.observable(),f.filter=ko.observableArray(),f.appliedFilter=ko.observableArray(),f.header=ko.observableArray(),f.sortOnly=ko.observable(),f.activeSort=ko.observableArray(),f.entries=ko.computed(function(){var e=(f.currentPage()-1)*f.entriesPerPage();return f.data.slice(e,e+f.entriesPerPage())}),f.hasEntries=ko.computed(function(){return f.totalEntries()>0}),f.totalPages=ko.computed(function(){var e=Math.ceil(f.totalEntries()/f.entriesPerPage());return e>0?e:1}),f.previousEnabled=ko.computed(function(){return 1!==f.currentPage()}),f.nextEnabled=ko.computed(function(){return f.currentPage()!==f.totalPages()}),f.showFirstEntriesEnabled=ko.computed(function(){return f.hasEntries()&&f.totalEntries()>f.defaultEntriesPerPage}),f.firstEntriesCount=ko.computed(function(){return f.totalEntries()<f.entriesPerPage()?f.totalEntries():f.defaultEntriesPerPage}),f.previousItemsCount=ko.computed(function(){return f.defaultEntriesPerPage}),f.nextItemsCount=ko.computed(function(){return f.totalPages()-f.currentPage()==1?f.totalEntries()-f.entriesPerPage()*(f.totalPages()-1):f.defaultEntriesPerPage}),f.loadedEntriesCount=ko.computed(function(){return f.data().length}),f.shownAll=ko.computed(function(){return f.entriesPerPage()>=f.totalEntries()}),f.totalEntriesOnNextPage=function(){return f.requestedPage()*f.entriesPerPage()},f.hasError=ko.computed(function(){return 0!==f.error().length}),f.errorCode=ko.computed(function(){return void 0!==f.error().jqXHR?f.error().jqXHR.status:null}),f.parserError=ko.computed(function(){return void 0!==f.error().status?"parsererror"===f.error().status:!1}),f.firstPage=function(){f.requestedPage(1),t()},f.lastPage=function(){},f.next=function(){f.currentPage()<f.totalPages()&&(f.requestedPage(f.currentPage()+1),t())},f.previous=function(){f.currentPage()>1&&(f.requestedPage(f.currentPage()-1),t())},f.showFirstEntries=function(){f.requestedPage(1),f.entriesPerPage(f.defaultEntriesPerPage),t()},f.showAll=function(){f.requestedPage(1),f.entriesPerPage(f.totalEntries()),t()},f.sort=function(e,r,n){if(void 0!==f.header()&&(a(n),-1!==$.inArray(e,f.header()))){var o={column:e,asc:!0};f.activeSort().column===e&&(o.asc=!f.activeSort().asc),f.activeSort(o),f.sortOnly(!0),t()}},f.setUrl=function(e){f.url(void 0!==e?e:f.defaultUrl)},f.getList=function(e,r){f.requestedPage(1),a(r),t()},g()}}();