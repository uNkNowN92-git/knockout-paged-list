var PagedList=function(e){return function(e){function t(){r()?(g.requestedPage(1),g.entriesPerPage(g.defaultEntriesPerPage),o()):g.sortOnly()?(o(),g.sortOnly(!1)):n()?o():g.currentPage(g.requestedPage())}function r(){var e=!1,t={};return $.extend(t,[g.filter()][0]),_.isEqual(t,g.appliedFilter())||(g.appliedFilter(t),e=!0),e}function n(){return g.loadedEntriesCount()<g.totalEntriesOnNextPage()&&g.loadedEntriesCount()!=g.totalEntries()}function a(e){var t=$(e.target).data("url");g.setUrl(t)}function o(){if(void 0!==g.url()){g.loading(!0);var e=u();$.getJSON(g.url(),e,function(e){s(e)}).fail(d).always(function(){g.loading(!1),g.currentPage(g.requestedPage())})}}function u(){var e={page:g.requestedPage(),perPage:g.entriesPerPage(),currentEntries:g.loadedEntriesCount()};return g.activeSort()&&$.extend(e,{sortBy:g.activeSort().column,sortAsc:g.activeSort().asc,sortOnly:g.sortOnly()}),$.extend(e,g.filter()),e}function s(e){e.data.length>0&&i(e.data),l(e.details)}function i(e){var t=g.requestedPage()>g.currentPage();t?(ko.utils.arrayPushAll(g.data(),e),g.data.valueHasMutated(),g.currentPage()<g.totalPages()&&g.currentPage(g.currentPage()+1)):(c(e[0]),g.data(e))}function l(e){0===e.totalEntries&&g.data([]),g.totalEntries(e.totalEntries)}function c(e){if(0===g.header().length){var t=$.map(e,function(e,t){return t});g.header(t)}}function d(e,t,r){g.error({jqXHR:e,status:t,error:r})}function P(){void 0!==g.defaultUrl&&(g.setUrl(g.defaultUrl),g.queryOnLoad&&g.getList())}var g=this;g.queryOnLoad=void 0!==e.queryOnLoad?e.queryOnLoad:!0,g.defaultEntriesPerPage=e.entriesPerPage||5,g.defaultUrl=e.url,g.url=ko.observable(),g.data=ko.observableArray(),g.currentPage=ko.observable(1),g.requestedPage=ko.observable(1),g.entriesPerPage=ko.observable(g.defaultEntriesPerPage),g.totalEntries=ko.observable(0),g.error=ko.observableArray(),g.loading=ko.observable(),g.filter=ko.observableArray(),g.appliedFilter=ko.observableArray(),g.header=ko.observableArray(),g.sortOnly=ko.observable(),g.activeSort=ko.observableArray(),g.entries=ko.computed(function(){var e=(g.currentPage()-1)*g.entriesPerPage();return g.data.slice(e,e+g.entriesPerPage())}),g.hasEntries=ko.computed(function(){return g.totalEntries()>0}),g.totalPages=ko.computed(function(){var e=Math.ceil(g.totalEntries()/g.entriesPerPage());return e>0?e:1}),g.previousEnabled=ko.computed(function(){return 1!==g.currentPage()}),g.nextEnabled=ko.computed(function(){return console.log(g.currentPage()!==g.totalPages(),g.currentPage(),g.totalPages()),g.currentPage()!==g.totalPages()}),g.showFirstEntriesEnabled=function(){return console.log(g.nextEnabled()),g.hasEntries()&&g.totalEntries()>g.defaultEntriesPerPage},g.firstEntriesCount=ko.computed(function(){return g.totalEntries()<g.entriesPerPage()?g.totalEntries():g.defaultEntriesPerPage}),g.previousItemsCount=ko.computed(function(){return g.defaultEntriesPerPage}),g.nextItemsCount=ko.computed(function(){return g.totalPages()-g.currentPage()==1?g.totalEntries()-g.entriesPerPage()*(g.totalPages()-1):g.defaultEntriesPerPage}),g.loadedEntriesCount=ko.computed(function(){return g.data().length}),g.shownAll=function(){return g.entriesPerPage()>=g.totalEntries()},g.totalEntriesOnNextPage=function(){return g.requestedPage()*g.entriesPerPage()},g.hasError=ko.computed(function(){return 0!==g.error().length}),g.errorCode=ko.computed(function(){return void 0!==g.error().jqXHR?g.error().jqXHR.status:null}),g.parserError=ko.computed(function(){return void 0!==g.error().status?"parsererror"===g.error().status:!1}),g.firstPage=function(){},g.lastPage=function(){},g.next=function(){g.currentPage()<g.totalPages()&&(g.requestedPage(g.currentPage()+1),t())},g.previous=function(){g.currentPage()>1&&(g.requestedPage(g.currentPage()-1),t())},g.showFirstEntries=function(){g.requestedPage(1),g.entriesPerPage(g.defaultEntriesPerPage),t()},g.showAll=function(){g.requestedPage(1),g.entriesPerPage(g.totalEntries()),t()},g.sort=function(e,r,n){if(void 0!==g.header()&&(a(n),-1!==$.inArray(e,g.header()))){var o={column:e,asc:!0};g.activeSort().column===e&&(o.asc=!g.activeSort().asc),g.activeSort(o),g.sortOnly(!0),t()}},g.setUrl=function(e){g.url(void 0!==e?e:g.defaultUrl)},g.getList=function(e,r){a(r),t()},P()}}();