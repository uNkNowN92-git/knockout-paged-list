var PagedList=function(e){return function(e){function t(e){r.loading(!0);var t={perPage:r.entriesPerPage(),page:r.pageNumber()+(e?1:0),currentEntries:r.data().length};r.activeSort()&&($.extend(t,{sortAsc:r.activeSort().asc,sortBy:r.activeSort().column,sortOnly:r.sortOnly()}),r.sortOnly(!1)),$.getJSON(r.url,$.extend(t,r.query()),function(t){if(e)r.data.push.apply(r.data(),t.data),r.pageNumber(r.pageNumber()+1);else if(r.data(t.data),void 0!==t.data[0]&&0===r.headers().length){var a=$.map(t.data[0],function(e,t){return{column:t,asc:!0}});r.headers(a)}r.totalEntries(t.details.totalEntries),r.loading(!1)})}var r=this;r.defaultEntriesPerPage=e.entriesPerPage||5,r.url=e.url||"",r.data=ko.observableArray(),r.query=ko.observableArray(),r.loading=ko.observable(!1),r.pageNumber=ko.observable(1),r.totalEntries=ko.observable(),r.entriesPerPage=ko.observable(r.defaultEntriesPerPage),r.totalPages=ko.computed(function(){var e=Math.floor(r.totalEntries()/r.entriesPerPage());return e+=r.totalEntries()%r.entriesPerPage()>0?1:0}),r.entries=ko.computed(function(){var e=(r.pageNumber()-1)*r.entriesPerPage();return r.data.slice(e,e+r.entriesPerPage())}),r.onFirstPage=ko.computed(function(){return 1===r.pageNumber()||0===r.totalEntries()}),r.onLastPage=ko.computed(function(){return r.pageNumber()===r.totalPages()||0===r.totalEntries()}),r.nextItemsCount=ko.computed(function(){return r.totalPages()-r.pageNumber()==1?r.totalEntries()%r.entriesPerPage():r.defaultEntriesPerPage}),r.previousItemsCount=ko.computed(function(){return r.defaultEntriesPerPage}),r.firstPage=function(){r.pageNumber(1)},r.lastPage=function(){r.pageNumber(r.totalPages())},r.next=function(){r.pageNumber()<r.totalPages()&&(r.data().length<(r.pageNumber()+2)*r.entriesPerPage()&&r.data().length!=r.totalEntries()?t(!0):r.pageNumber(r.pageNumber()+1))},r.previous=function(){0!==r.pageNumber()&&r.pageNumber(r.pageNumber()-1)},r.showFirstEntries=function(){r.pageNumber(1),r.entriesPerPage(r.defaultEntriesPerPage)},r.showAll=function(){r.pageNumber(1),r.entriesPerPage(r.totalEntries()),r.data().length<r.totalEntries()&&t()},r.shownAll=function(){return r.entriesPerPage()==r.totalEntries()},r.activeSort=ko.observableArray(),r.headers=ko.observableArray(),r.sortOnly=ko.observable(!1),r.sort=function(e){var a=r.headers().GetIndexByColumn(e);if(void 0!==a){var n=r.headers()[a];r.activeSort().column===e&&(n.asc=!n.asc),r.activeSort(n),r.sortOnly(!0),t()}},r.getList=function(e){r.pageNumber(1),r.entriesPerPage(r.defaultEntriesPerPage),t()},Array.prototype.GetIndexByColumn=function(e){return $.map(r.headers(),function(t,r){return t.column===e?r:void 0})[0]}}}();