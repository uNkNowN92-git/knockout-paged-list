/*
 * knockout-paged-list v1.1.9
 * A KnockoutJS Plugin for Paged List/Grid
 * @repository https://github.com/uNkNowN92-git/knockout-paged-list.git
 * @license ISC
 */
var PagedList=function(e,r){"use strict";function t(n){function a(){var e;e=I===!1?B:void 0===w?r.mapping.fromJS(B):r.mapping.fromJS(B,w),D.data(e)}function o(e){var r,t=[];for(r in e)if(t.push(r),t.length>k)return!1;return!0}function u(e){var r,t=[];for(r in e)t.push(r);return t.length}function i(){return 1===z()&&D.entriesPerPage()===D.totalEntries()}function s(){l()?(z(1),G(N),v()):J===!1?v():D.sortOnly()?v():d()?v():f()?v():(D.currentPage(z()),D.entriesPerPage(G()))}function l(){var t={};return e.extend(t,[D.filter()][0]),r.toJSON(t)!=r.toJSON(D.appliedFilter())?(D.appliedFilter(t),!0):!1}function d(){return D.loadedEntriesCount()<D.totalEntriesOnNextPage()&&D.loadedEntriesCount()!==D.totalEntries()||!c()}function c(){var r=!0,t=(z()-1)*G(),n=D.data.slice(t,t+G());return e.each(n,function(e,t){o(t)&&(r=!1)}),r}function f(){var e=D.isPageReloadRequired()===!0;return D.isPageReloadRequired(!1),e}function p(r){var t=void 0!==r?e(r.target).data("url"):void 0;D.setUrl(t)}function g(r){return void 0!==r?e(r.target).data("sort-field"):void 0}function v(){void 0!==M()&&(P(),D.loading(!0),D.error([]),Q(E()),D.request=e.ajax({url:M().toString(),method:"get",dataType:"json",cache:!1,async:!0,data:Q(),success:b,error:C,beforeSend:y}).always(function(){D.loading(!1),D.entriesPerPage(G())}))}function P(){D.request&&4!==D.request.readyState&&D.request.abort()}function y(r){e.each(D.headers(),function(e,t){r.setRequestHeader(e,t)})}function E(){var r={page:z(),perPage:G(),currentEntries:D.loadedEntriesCount(),showAll:i()};return D.activeSort()&&e.extend(r,{sortBy:D.activeSort().column,sortAsc:D.activeSort().asc,sortOnly:D.sortOnly()}),e.extend(r,D.filter()),delete r.updateItems,r}function b(e){U=x(e.data,e.Data),X=x(e.details,e.Details),T=x(X.totalEntries,X.TotalEntries),U.length>0&&(m(),D.currentPage(z())),O(),D.error([])}function m(){var e=z()*G()<=T?z()*G():T,r=L(e),t=D.data();"function"==typeof t?(t.splice(T,t().length-T),r.updateItems(0,t())):(t.splice(T,t.length-T),r.updateItems(0,t)),D.sortOnly()?(r.updateItems(0,U),D.sortOnly(!1)):r.updateItems(A(),U),h(r[0]),B=r,a()}function h(r){if(0===D.columns().length||J===!1){var t=e.map(r,function(e,r){return r});D.columns(t)}}function O(){0===T&&D.data([]),D.totalEntries(T)}function C(r,t,n){return 200===r.status?(T=0,void O()):(D.error({jqXHR:r,status:t,error:n}),e.extend(D.appliedFilter(),{error:!0}),void(H&&D.data([])))}function q(){return(D.currentPage()-1)*D.entriesPerPage()}function A(){return(z()-1)*D.entriesPerPage()}function L(r){return e.map(Array.apply(null,Array(r)),function(){return{}})}function S(r){return e.map(r,function(e,r){return o(e)?void 0:r}).length}function x(e,r){return void 0!==e?e:r}function F(){n&&(W=x(n.url,W),j=t.setup.queryOnLoad||x(n.queryOnLoad,t.defaults.queryOnLoad),N=t.setup.defaultEntriesPerPage||x(n.entriesPerPage,t.defaults.defaultEntriesPerPage),H=t.setup.clearLoadedDataOnError||x(n.clearLoadedDataOnError,t.defaults.clearLoadedDataOnError),J=t.setup.queryOnFilterChangeOnly||x(n.queryOnFilterChangeOnly,t.defaults.queryOnFilterChangeOnly),w=x(n.mapping,w),I=x(n.dataAsObservable,void 0===I&&void 0!==w?!0:!1),k=I===!0&&void 0!==w?u(w.create({data:{}})):0)}function R(){void 0!==W&&(D.setUrl(W),j&&D.getList()),D.isReady(!0)}var D=this;Array.prototype.updateItems=function(e,r){void 0!==r&&Array.prototype.splice.apply(this,[e,r.length].concat(r))};var w,I,j,N,H,J,U,T,X,k=0,B=[],M=r.observable(),Q=r.observable(),z=r.observable(1),G=r.observable(1),K=!1,V=r.observable(),W="/";D.request=void 0,F(),D.data=r.observableArray([]),D.currentPage=r.observable(1),D.entriesPerPage=r.observable(N),D.totalEntries=r.observable(0),D.isPageReloadRequired=r.observable(!1),D.headers=r.observableArray(),D.error=r.observableArray(),D.loading=r.observable(!1),D.filter=r.observableArray(),D.appliedFilter=r.observableArray(),D.columns=r.observableArray(),D.sortOnly=r.observable(!1),D.activeSort=r.observableArray(),D.isReady=r.observable(!1),D.pageNumber=r.pureComputed({write:function(e){V(e)},read:function(){return D.currentPage()}}),D.pageNumbers=r.pureComputed(function(){for(var e=[],r=1;r<=D.totalPages();r++)e.push(r);return e}),D.entries=r.pureComputed(function(){var e=q();return D.data.slice(e,e+D.entriesPerPage())}),D.hasEntries=r.pureComputed(function(){return D.totalEntries()>0}),D.totalPages=r.pureComputed(function(){var e=Math.ceil(D.totalEntries()/D.entriesPerPage());return e>0?e:1}),D.previousEnabled=r.pureComputed(function(){return 1!==D.currentPage()&&D.loading()===!1&&!D.hasError()}),D.nextEnabled=r.pureComputed(function(){return D.currentPage()!==D.totalPages()&&D.loading()===!1&&!D.hasError()}),D.showAllEntriesEnabled=r.pureComputed(function(){return D.totalEntries()>N&&D.loading()===!1&&!D.hasError()}),D.showFirstEntriesEnabled=r.pureComputed(function(){return D.hasEntries()&&D.totalEntries()>N&&D.loading()===!1&&!D.hasError()}),D.firstEntriesCount=r.pureComputed(function(){return D.totalEntries()<D.entriesPerPage()?D.totalEntries():N}),D.previousItemsCount=r.pureComputed(function(){return N}),D.nextItemsCount=r.pureComputed(function(){return D.totalPages()-D.currentPage()===1?D.totalEntries()-D.entriesPerPage()*(D.totalPages()-1):N}),D.loadedEntriesCount=r.pureComputed(function(){var e=D.data(),r="function"==typeof e?e():e;return S(r)}),D.shownAll=r.pureComputed(function(){return D.totalEntries()<=N?!1:D.entriesPerPage()>=D.totalEntries()}),D.totalEntriesOnNextPage=function(){return z()*G()},D.url=r.pureComputed(function(){return M()}),D.queryOptions=r.pureComputed(function(){return Q()}),D.hasError=r.pureComputed(function(){return 0!==D.error().length}),D.errorCode=r.pureComputed(function(){return void 0!==D.error().jqXHR?D.error().jqXHR.status:null}),D.parserError=r.pureComputed(function(){return void 0!==D.error().status?"parsererror"===D.error().status:!1}),D.preserveCurrentPage=function(e){K=void 0!==e?e:!1},D.goToPage=function(){var e=V();1>e||(z(e),s())},D.firstPage=function(){z(1),s()},D.lastPage=function(){z(D.totalPages()),s()},D.next=function(){D.currentPage()<D.totalPages()&&(z(D.currentPage()+1),s())},D.previous=function(){D.currentPage()>1&&(z(D.currentPage()-1),s())},D.showFirstEntries=function(){z(1),G(N),s()},D.showAll=function(){z(1),G(D.totalEntries()),s()},D.sort=function(r,t,n){if(void 0!==D.columns()&&!(D.totalEntries()<=1)&&(void 0!==n?p(n):(p(t),r=g(t)),-1!==e.inArray(r,D.columns()))){var a={column:r,asc:!0};D.activeSort().column===r&&(a.asc=!D.activeSort().asc),D.activeSort(a),D.sortOnly(!0),s()}},D.setUrl=function(e){M(void 0!==e?e:W)},D.getList=function(e,r,t){t?D.setUrl(t):(z(K===!0?D.currentPage():1),p(r)),s()},R()}return t.setup={},t.defaults={queryOnLoad:!0,defaultEntriesPerPage:5,clearLoadedDataOnError:!1,queryOnFilterChangeOnly:!0},t.setDefaults=function(r){r&&e.extend(t.defaults,r);[r.queryOnLoad,r.defaultEntriesPerPage,r.clearLoadedDataOnError,r.queryOnFilterChangeOnly]},t.setup=function(r){r&&e.extend(t.setup,r);[r.queryOnLoad,r.defaultEntriesPerPage,r.clearLoadedDataOnError,r.queryOnFilterChangeOnly]},t}(jQuery,ko);