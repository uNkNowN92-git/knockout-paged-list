/*
 * knockout-paged-list v1.1.1
 * A KnockoutJS Plugin for Paged List/Grid
 * @repository https://github.com/uNkNowN92-git/knockout-paged-list.git
 * @license ISC
 */
var PagedList=function(e){return function(e){function r(){return 1===b.requestedPage()&&b.entriesPerPage()===b.totalEntries()}function t(){n()?(b.requestedPage(1),b.requestedEntriesPerPage(b.defaultEntriesPerPage),i()):b.queryOnFilterChangeOnly===!1?i():b.sortOnly()?i():a()?i():(b.currentPage(b.requestedPage()),b.entriesPerPage(b.requestedEntriesPerPage()))}function n(){var e={};return $.extend(e,[b.filter()][0]),ko.toJSON(e)!=ko.toJSON(b.appliedFilter())?(b.appliedFilter(e),!0):!1}function a(){return(b.loadedEntriesCount()<b.totalEntriesOnNextPage()||b.entriesPerPage()!==b.requestedEntriesPerPage())&&b.loadedEntriesCount()!==b.totalEntries()}function o(e){var r=void 0!==e?$(e.target).data("url"):void 0;b.setUrl(r)}function u(e){return void 0!==e?$(e.target).data("sort-field"):void 0}function i(){if(void 0!==b.url()){s(),b.loading(!0),b.error([]);var e=d();b.request=$.ajax({url:b.url(),method:"get",dataType:"json",data:e,success:c,error:p,beforeSend:l}).always(function(){b.loading(!1),b.entriesPerPage(b.requestedEntriesPerPage())})}}function s(){b.request&&4!==b.request.readyState&&b.request.abort()}function l(e){$.each(b.headers(),function(r,t){e.setRequestHeader(r,t)})}function d(){var e={page:b.requestedPage(),perPage:b.requestedEntriesPerPage(),currentEntries:b.loadedEntriesCount(),showAll:r()};return b.activeSort()&&$.extend(e,{sortBy:b.activeSort().column,sortAsc:b.activeSort().asc,sortOnly:b.sortOnly()}),$.extend(e,b.filter()),delete e.updateItems,e}function c(e){e.data.length>0&&(P(e),b.currentPage(b.requestedPage())),f(e.details),b.error([])}function P(e){var r=y(e.details.totalEntries),t=b.data();"function"==typeof t&&(t.splice(e.details.totalEntries,t.length-e.details.totalEntries),r.updateItems(0,t())),b.sortOnly()?(r.updateItems(0,e.data),b.sortOnly(!1)):r.updateItems(v(),e.data),g(r[0]),b.currentData=r,b.mapData()}function g(e){if(0===b.columns().length||b.queryOnFilterChangeOnly===!1){var r=$.map(e,function(e,r){return r});b.columns(r)}}function f(e){0===e.totalEntries&&b.data([]),b.totalEntries(e.totalEntries)}function p(e,r,t){b.error({jqXHR:e,status:r,error:t}),b.appliedFilter([]),b.clearLoadedDataOnError&&b.data([])}function E(){return(b.currentPage()-1)*b.entriesPerPage()}function v(){return(b.requestedPage()-1)*b.entriesPerPage()}function y(e){return $.map(Array.apply(null,Array(e)),function(){return{}})}function q(e){return $.map(e,function(e,r){return $.isEmptyObject(e)?void 0:r}).length}function m(){e&&(b.defaultUrl=void 0!==e.url?e.url:b.defaultUrl,b.queryOnLoad=void 0!==e.queryOnLoad?e.queryOnLoad:b.queryOnLoad,b.defaultEntriesPerPage=void 0!==e.entriesPerPage?e.entriesPerPage:b.defaultEntriesPerPage,b.clearLoadedDataOnError=void 0!==e.clearLoadedDataOnError?e.clearLoadedDataOnError:b.clearLoadedDataOnError,b.queryOnFilterChangeOnly=void 0!==e.queryOnFilterChangeOnly?e.queryOnFilterChangeOnly:b.queryOnFilterChangeOnly)}function O(){void 0!==b.defaultUrl&&(b.setUrl(b.defaultUrl),b.queryOnLoad&&b.getList())}var b=this;Array.prototype.updateItems=function(e,r){void 0!==r&&Array.prototype.splice.apply(this,[e,r.length].concat(r))},b.currentData=[],b.defaultUrl=void 0,b.queryOnLoad=!0,b.defaultEntriesPerPage=5,b.clearLoadedDataOnError=!1,b.queryOnFilterChangeOnly=!0,b.request=void 0,m(),b.url=ko.observable(),b.data=ko.observableArray([]),b.currentPage=ko.observable(1),b.requestedPage=ko.observable(1),b.entriesPerPage=ko.observable(b.defaultEntriesPerPage),b.requestedEntriesPerPage=ko.observable(1),b.totalEntries=ko.observable(0),b.headers=ko.observableArray(),b.error=ko.observableArray(),b.loading=ko.observable(!1),b.filter=ko.observableArray(),b.appliedFilter=ko.observableArray(),b.columns=ko.observableArray(),b.sortOnly=ko.observable(!1),b.activeSort=ko.observableArray(),b.entries=ko.pureComputed(function(){var e=E();return b.data.slice(e,e+b.entriesPerPage())}),b.hasEntries=ko.pureComputed(function(){return b.totalEntries()>0}),b.totalPages=ko.pureComputed(function(){var e=Math.ceil(b.totalEntries()/b.entriesPerPage());return e>0?e:1}),b.previousEnabled=ko.pureComputed(function(){return 1!==b.currentPage()&&b.loading()===!1}),b.nextEnabled=ko.pureComputed(function(){return b.currentPage()!==b.totalPages()&&b.loading()===!1}),b.showFirstEntriesEnabled=ko.pureComputed(function(){return b.hasEntries()&&b.totalEntries()>b.defaultEntriesPerPage&&b.loading()===!1}),b.firstEntriesCount=ko.pureComputed(function(){return b.totalEntries()<b.entriesPerPage()?b.totalEntries():b.defaultEntriesPerPage}),b.previousItemsCount=ko.pureComputed(function(){return b.defaultEntriesPerPage}),b.nextItemsCount=ko.pureComputed(function(){return b.totalPages()-b.currentPage()==1?b.totalEntries()-b.entriesPerPage()*(b.totalPages()-1):b.defaultEntriesPerPage}),b.loadedEntriesCount=ko.pureComputed(function(){var e=b.data();return"function"==typeof e?q(e()):0}),b.shownAll=ko.pureComputed(function(){return b.entriesPerPage()>=b.totalEntries()}),b.totalEntriesOnNextPage=function(){return b.requestedPage()*b.requestedEntriesPerPage()},b.hasError=ko.pureComputed(function(){return 0!==b.error().length}),b.errorCode=ko.pureComputed(function(){return void 0!==b.error().jqXHR?b.error().jqXHR.status:null}),b.parserError=ko.pureComputed(function(){return void 0!==b.error().status?"parsererror"===b.error().status:!1}),b.mapData=function(){var e=ko.mapping.fromJS(b.currentData);b.data(e)},b.firstPage=function(){b.requestedPage(1),t()},b.lastPage=function(){},b.next=function(){b.currentPage()<b.totalPages()&&(b.requestedPage(b.currentPage()+1),t())},b.previous=function(){b.currentPage()>1&&(b.requestedPage(b.currentPage()-1),t())},b.showFirstEntries=function(){b.requestedPage(1),b.requestedEntriesPerPage(b.defaultEntriesPerPage),t()},b.showAll=function(){b.requestedPage(1),b.requestedEntriesPerPage(b.totalEntries()),t()},b.sort=function(e,r,n){if(void 0!==b.columns()&&!(b.totalEntries()<=1)&&(void 0!==n?o(n):(o(r),e=u(r)),-1!==$.inArray(e,b.columns()))){var a={column:e,asc:!0};b.activeSort().column===e&&(a.asc=!b.activeSort().asc),b.activeSort(a),b.sortOnly(!0),t()}},b.setUrl=function(e){b.url(void 0!==e?e:b.defaultUrl)},b.getList=function(e,r){b.requestedPage(1),o(r),t()},O()}}();