/*
 * knockout-paged-list v1.1.4
 * A KnockoutJS Plugin for Paged List/Grid
 * @repository https://github.com/uNkNowN92-git/knockout-paged-list.git
 * @license ISC
 */
var PagedList=function(){return function(t){function e(){var t;t=w===!1?ko.mapping.fromJS(j,F):void 0===q?ko.mapping.fromJS(j):ko.mapping.fromJS(j,q),S.data(t)}function r(t){var e,r=[];for(e in t)if(r.push(e),r.length>I)return!1;return!0}function n(t){var e,r=[];for(e in t)r.push(e);return r.length}function o(){return 1===H()&&S.entriesPerPage()===S.totalEntries()}function a(){u()?(H(1),N(U),c()):B===!1?c():S.sortOnly()?c():i()?c():(S.currentPage(H()),S.entriesPerPage(N()))}function u(){var t={};return $.extend(t,[S.filter()][0]),ko.toJSON(t)!=ko.toJSON(S.appliedFilter())?(S.appliedFilter(t),!0):!1}function i(){return(S.loadedEntriesCount()<S.totalEntriesOnNextPage()||S.entriesPerPage()!==N())&&S.loadedEntriesCount()!==S.totalEntries()}function s(t){var e=void 0!==t?$(t.target).data("url"):void 0;S.setUrl(e)}function l(t){return void 0!==t?$(t.target).data("sort-field"):void 0}function c(){void 0!==J()&&(d(),S.loading(!0),S.error([]),L(f()),S.request=$.ajax({url:J().toString(),method:"get",dataType:"json",data:L(),success:g,error:b,beforeSend:p}).always(function(){S.loading(!1),S.entriesPerPage(N())}))}function d(){S.request&&4!==S.request.readyState&&S.request.abort()}function p(t){$.each(S.headers(),function(e,r){t.setRequestHeader(e,r)})}function f(){var t={page:H(),perPage:N(),currentEntries:S.loadedEntriesCount(),showAll:o()};return S.activeSort()&&$.extend(t,{sortBy:S.activeSort().column,sortAsc:S.activeSort().asc,sortOnly:S.sortOnly()}),$.extend(t,S.filter()),delete t.updateItems,t}function g(t){t.data.length>0&&(v(t),S.currentPage(H())),m(t.details),S.error([])}function v(t){var r=y(t.details.totalEntries),n=S.data();"function"==typeof n&&(n.splice(t.details.totalEntries,n().length-t.details.totalEntries),r.updateItems(0,n())),S.sortOnly()?(r.updateItems(0,t.data),S.sortOnly(!1)):r.updateItems(k(),t.data),P(r[0]),j=r,e()}function P(t){if(0===S.columns().length||B===!1){var e=$.map(t,function(t,e){return e});S.columns(e)}}function m(t){0===t.totalEntries&&S.data([]),S.totalEntries(t.totalEntries)}function b(t,e,r){S.error({jqXHR:t,status:e,error:r}),$.extend(S.appliedFilter(),{error:!0}),X&&S.data([])}function E(){return(S.currentPage()-1)*S.entriesPerPage()}function k(){return(H()-1)*S.entriesPerPage()}function y(t){return $.map(Array.apply(null,Array(t)),function(){return{}})}function h(t){return $.map(t,function(t,e){return r(t)?void 0:e}).length}function C(t,e){return void 0!==t?t:e}function A(){t&&(x=C(t.url,x),R=C(t.queryOnLoad,R),U=C(t.entriesPerPage,U),X=C(t.clearLoadedDataOnError,X),B=C(t.queryOnFilterChangeOnly,B),q=C(t.mapping,q),w=C(t.dataAsObservable,void 0===w&&void 0!==q?!0:!1),I=w===!0&&void 0!==q?n(q.create({data:{}})):0)}function O(){void 0!==x&&(S.setUrl(x),R&&S.getList())}var S=this;Array.prototype.updateItems=function(t,e){void 0!==e&&Array.prototype.splice.apply(this,[t,e.length].concat(e))};var q,x,w,F={create:function(t){return t.data}},I=0,j=[],J=ko.observable(),L=ko.observable(),H=ko.observable(1),N=ko.observable(1),R=!0,U=5,X=!1,B=!0;S.request=void 0,A(),S.data=ko.observableArray([]),S.currentPage=ko.observable(1),S.entriesPerPage=ko.observable(U),S.totalEntries=ko.observable(0),S.headers=ko.observableArray(),S.error=ko.observableArray(),S.loading=ko.observable(!1),S.filter=ko.observableArray(),S.appliedFilter=ko.observableArray(),S.columns=ko.observableArray(),S.sortOnly=ko.observable(!1),S.activeSort=ko.observableArray(),S.entries=ko.pureComputed(function(){var t=E();return S.data.slice(t,t+S.entriesPerPage())}),S.hasEntries=ko.pureComputed(function(){return S.totalEntries()>0}),S.totalPages=ko.pureComputed(function(){var t=Math.ceil(S.totalEntries()/S.entriesPerPage());return t>0?t:1}),S.previousEnabled=ko.pureComputed(function(){return 1!==S.currentPage()&&S.loading()===!1}),S.nextEnabled=ko.pureComputed(function(){return S.currentPage()!==S.totalPages()&&S.loading()===!1}),S.showAllEntriesEnabled=ko.pureComputed(function(){return S.totalEntries()>U&&S.loading()===!1}),S.showFirstEntriesEnabled=ko.pureComputed(function(){return S.hasEntries()&&S.totalEntries()>U&&S.loading()===!1}),S.firstEntriesCount=ko.pureComputed(function(){return S.totalEntries()<S.entriesPerPage()?S.totalEntries():U}),S.previousItemsCount=ko.pureComputed(function(){return U}),S.nextItemsCount=ko.pureComputed(function(){return S.totalPages()-S.currentPage()==1?S.totalEntries()-S.entriesPerPage()*(S.totalPages()-1):U}),S.loadedEntriesCount=ko.pureComputed(function(){var t=S.data();return"function"==typeof t?h(t()):0}),S.shownAll=ko.pureComputed(function(){return S.totalEntries()<=U?!1:S.entriesPerPage()>=S.totalEntries()}),S.totalEntriesOnNextPage=function(){return H()*N()},S.url=ko.pureComputed(function(){return J()}),S.queryOptions=ko.pureComputed(function(){return L()}),S.hasError=ko.pureComputed(function(){return 0!==S.error().length}),S.errorCode=ko.pureComputed(function(){return void 0!==S.error().jqXHR?S.error().jqXHR.status:null}),S.parserError=ko.pureComputed(function(){return void 0!==S.error().status?"parsererror"===S.error().status:!1}),S.firstPage=function(){H(1),a()},S.lastPage=function(){H(S.totalPages()),a()},S.next=function(){S.currentPage()<S.totalPages()&&(H(S.currentPage()+1),a())},S.previous=function(){S.currentPage()>1&&(H(S.currentPage()-1),a())},S.showFirstEntries=function(){H(1),N(U),a()},S.showAll=function(){H(1),N(S.totalEntries()),a()},S.sort=function(t,e,r){if(void 0!==S.columns()&&!(S.totalEntries()<=1)&&(void 0!==r?s(r):(s(e),t=l(e)),-1!==$.inArray(t,S.columns()))){var n={column:t,asc:!0};S.activeSort().column===t&&(n.asc=!S.activeSort().asc),S.activeSort(n),S.sortOnly(!0),a()}},S.setUrl=function(t){J(void 0!==t?t:x)},S.getList=function(t,e){H(1),s(e),a()},O()}}();