/*
 * knockout-paged-list v1.1.5
 * A KnockoutJS Plugin for Paged List/Grid
 * @repository https://github.com/uNkNowN92-git/knockout-paged-list.git
 * @license ISC
 */
var PagedList=function(){return function(e){function t(){var e;e=I===!1?H:void 0===x?ko.mapping.fromJS(H):ko.mapping.fromJS(H,x),S.data(e)}function r(e){var t,r=[];for(t in e)if(r.push(t),r.length>L)return!1;return!0}function n(e){var t,r=[];for(t in e)r.push(t);return r.length}function o(){return 1===D()&&S.entriesPerPage()===S.totalEntries()}function a(){u()?(D(1),U(T),d()):M===!1?d():S.sortOnly()?d():i()?d():s()?d():(S.currentPage(D()),S.entriesPerPage(U()))}function u(){var e={};return $.extend(e,[S.filter()][0]),ko.toJSON(e)!=ko.toJSON(S.appliedFilter())?(S.appliedFilter(e),!0):!1}function i(){return S.loadedEntriesCount()<S.totalEntriesOnNextPage()&&S.loadedEntriesCount()!==S.totalEntries()}function s(){var e=S.isPageReloadRequired()===!0;return S.isPageReloadRequired(!1),e}function l(e){var t=void 0!==e?$(e.target).data("url"):void 0;S.setUrl(t)}function c(e){return void 0!==e?$(e.target).data("sort-field"):void 0}function d(){void 0!==J()&&(p(),S.loading(!0),S.error([]),N(g()),S.request=$.ajax({url:J().toString(),method:"get",dataType:"json",data:N(),success:v,error:k,beforeSend:f}).always(function(){S.loading(!1),S.entriesPerPage(U())}))}function p(){S.request&&4!==S.request.readyState&&S.request.abort()}function f(e){$.each(S.headers(),function(t,r){e.setRequestHeader(t,r)})}function g(){var e={page:D(),perPage:U(),currentEntries:S.loadedEntriesCount(),showAll:o()};return S.activeSort()&&$.extend(e,{sortBy:S.activeSort().column,sortAsc:S.activeSort().asc,sortOnly:S.sortOnly()}),$.extend(e,S.filter()),delete e.updateItems,e}function v(e){w=A(e.data,e.Data),j=A(e.details,e.Details),F=A(j.totalEntries,j.TotalEntries),w.length>0&&(P(),S.currentPage(D())),m(),S.error([])}function P(){var e=h(F),r=S.data();"function"==typeof r?(r.splice(F,r().length-F),e.updateItems(0,r())):(r.splice(F,r.length-F),e.updateItems(0,r)),S.sortOnly()?(e.updateItems(0,w),S.sortOnly(!1)):e.updateItems(y(),w),b(e[0]),H=e,t()}function b(e){if(0===S.columns().length||M===!1){var t=$.map(e,function(e,t){return t});S.columns(t)}}function m(){0===F&&S.data([]),S.totalEntries(F)}function k(e,t,r){S.error({jqXHR:e,status:t,error:r}),$.extend(S.appliedFilter(),{error:!0}),B&&S.data([])}function E(){return(S.currentPage()-1)*S.entriesPerPage()}function y(){return(D()-1)*S.entriesPerPage()}function h(e){return $.map(Array.apply(null,Array(e)),function(){return{}})}function C(e){return $.map(e,function(e,t){return r(e)?void 0:t}).length}function A(e,t){return void 0!==e?e:t}function O(){e&&(R=A(e.url,R),X=A(e.queryOnLoad,X),T=A(e.entriesPerPage,T),B=A(e.clearLoadedDataOnError,B),M=A(e.queryOnFilterChangeOnly,M),x=A(e.mapping,x),I=A(e.dataAsObservable,void 0===I&&void 0!==x?!0:!1),L=I===!0&&void 0!==x?n(x.create({data:{}})):0)}function q(){void 0!==R&&(S.setUrl(R),X&&S.getList())}var S=this;Array.prototype.updateItems=function(e,t){void 0!==t&&Array.prototype.splice.apply(this,[e,t.length].concat(t))};var x,R,I,w,F,j,L=0,H=[],J=ko.observable(),N=ko.observable(),D=ko.observable(1),U=ko.observable(1),X=!0,T=5,B=!1,M=!0;S.request=void 0,O(),S.data=ko.observableArray([]),S.currentPage=ko.observable(1),S.entriesPerPage=ko.observable(T),S.totalEntries=ko.observable(0),S.isPageReloadRequired=ko.observable(!1),S.headers=ko.observableArray(),S.error=ko.observableArray(),S.loading=ko.observable(!1),S.filter=ko.observableArray(),S.appliedFilter=ko.observableArray(),S.columns=ko.observableArray(),S.sortOnly=ko.observable(!1),S.activeSort=ko.observableArray(),S.entries=ko.pureComputed(function(){var e=E();return S.data.slice(e,e+S.entriesPerPage())}),S.hasEntries=ko.pureComputed(function(){return S.totalEntries()>0}),S.totalPages=ko.pureComputed(function(){var e=Math.ceil(S.totalEntries()/S.entriesPerPage());return e>0?e:1}),S.previousEnabled=ko.pureComputed(function(){return 1!==S.currentPage()&&S.loading()===!1}),S.nextEnabled=ko.pureComputed(function(){return S.currentPage()!==S.totalPages()&&S.loading()===!1}),S.showAllEntriesEnabled=ko.pureComputed(function(){return S.totalEntries()>T&&S.loading()===!1}),S.showFirstEntriesEnabled=ko.pureComputed(function(){return S.hasEntries()&&S.totalEntries()>T&&S.loading()===!1}),S.firstEntriesCount=ko.pureComputed(function(){return S.totalEntries()<S.entriesPerPage()?S.totalEntries():T}),S.previousItemsCount=ko.pureComputed(function(){return T}),S.nextItemsCount=ko.pureComputed(function(){return S.totalPages()-S.currentPage()==1?S.totalEntries()-S.entriesPerPage()*(S.totalPages()-1):T}),S.loadedEntriesCount=ko.pureComputed(function(){var e=S.data(),t="function"==typeof e?e():e;return C(t)}),S.shownAll=ko.pureComputed(function(){return S.totalEntries()<=T?!1:S.entriesPerPage()>=S.totalEntries()}),S.totalEntriesOnNextPage=function(){return D()*U()},S.url=ko.pureComputed(function(){return J()}),S.queryOptions=ko.pureComputed(function(){return N()}),S.hasError=ko.pureComputed(function(){return 0!==S.error().length}),S.errorCode=ko.pureComputed(function(){return void 0!==S.error().jqXHR?S.error().jqXHR.status:null}),S.parserError=ko.pureComputed(function(){return void 0!==S.error().status?"parsererror"===S.error().status:!1}),S.firstPage=function(){D(1),a()},S.lastPage=function(){D(S.totalPages()),a()},S.next=function(){S.currentPage()<S.totalPages()&&(D(S.currentPage()+1),a())},S.previous=function(){S.currentPage()>1&&(D(S.currentPage()-1),a())},S.showFirstEntries=function(){D(1),U(T),a()},S.showAll=function(){D(1),U(S.totalEntries()),a()},S.sort=function(e,t,r){if(void 0!==S.columns()&&!(S.totalEntries()<=1)&&(void 0!==r?l(r):(l(t),e=c(t)),-1!==$.inArray(e,S.columns()))){var n={column:e,asc:!0};S.activeSort().column===e&&(n.asc=!S.activeSort().asc),S.activeSort(n),S.sortOnly(!0),a()}},S.setUrl=function(e){J(void 0!==e?e:R)},S.getList=function(e,t){D(1),l(t),a()},q()}}();