/*
 * knockout-paged-list v1.1.4
 * A KnockoutJS Plugin for Paged List/Grid
 * @repository https://github.com/uNkNowN92-git/knockout-paged-list.git
 * @license ISC
 */
var PagedList=function(){return function(e){function t(){var e;e=R===!1?T:void 0===x?ko.mapping.fromJS(T):ko.mapping.fromJS(T,x),S.data(e)}function r(e){var t,r=[];for(t in e)if(r.push(t),r.length>I)return!1;return!0}function n(e){var t,r=[];for(t in e)r.push(t);return r.length}function o(){return 1===j()&&S.entriesPerPage()===S.totalEntries()}function a(){i()?(j(1),L(J),d()):U===!1?d():S.sortOnly()?d():u()?d():s()?d():(S.currentPage(j()),S.entriesPerPage(L()))}function i(){var e={};return $.extend(e,[S.filter()][0]),ko.toJSON(e)!=ko.toJSON(S.appliedFilter())?(S.appliedFilter(e),!0):!1}function u(){return S.loadedEntriesCount()<S.totalEntriesOnNextPage()&&S.loadedEntriesCount()!==S.totalEntries()}function s(){var e=S.isPageReloadRequired()===!0;return S.isPageReloadRequired(!1),e}function l(e){var t=void 0!==e?$(e.target).data("url"):void 0;S.setUrl(t)}function c(e){return void 0!==e?$(e.target).data("sort-field"):void 0}function d(){void 0!==w()&&(p(),S.loading(!0),S.error([]),F(g()),S.request=$.ajax({url:w().toString(),method:"get",dataType:"json",data:F(),success:v,error:E,beforeSend:f}).always(function(){S.loading(!1),S.entriesPerPage(L())}))}function p(){S.request&&4!==S.request.readyState&&S.request.abort()}function f(e){$.each(S.headers(),function(t,r){e.setRequestHeader(t,r)})}function g(){var e={page:j(),perPage:L(),currentEntries:S.loadedEntriesCount(),showAll:o()};return S.activeSort()&&$.extend(e,{sortBy:S.activeSort().column,sortAsc:S.activeSort().asc,sortOnly:S.sortOnly()}),$.extend(e,S.filter()),delete e.updateItems,e}function v(e){e.Data.length>0&&(P(e),S.currentPage(j())),m(e.Details),S.error([])}function P(e){var r=h(e.Details.TotalEntries),n=S.data();"function"==typeof n?(n.splice(e.Details.TotalEntries,n().length-e.Details.TotalEntries),r.updateItems(0,n())):(n.splice(e.Details.TotalEntries,n.length-e.Details.TotalEntries),r.updateItems(0,n)),S.sortOnly()?(r.updateItems(0,e.Data),S.sortOnly(!1)):r.updateItems(y(),e.Data),b(r[0]),T=r,t()}function b(e){if(0===S.columns().length||U===!1){var t=$.map(e,function(e,t){return t});S.columns(t)}}function m(e){0===e.TotalEntries&&S.data([]),S.totalEntries(e.TotalEntries)}function E(e,t,r){S.error({jqXHR:e,status:t,error:r}),$.extend(S.appliedFilter(),{error:!0}),N&&S.data([])}function k(){return(S.currentPage()-1)*S.entriesPerPage()}function y(){return(j()-1)*S.entriesPerPage()}function h(e){return $.map(Array.apply(null,Array(e)),function(){return{}})}function C(e){return $.map(e,function(e,t){return r(e)?void 0:t}).length}function A(e,t){return void 0!==e?e:t}function O(){e&&(D=A(e.url,D),H=A(e.queryOnLoad,H),J=A(e.entriesPerPage,J),N=A(e.clearLoadedDataOnError,N),U=A(e.queryOnFilterChangeOnly,U),x=A(e.mapping,x),R=A(e.dataAsObservable,void 0===R&&void 0!==x?!0:!1),I=R===!0&&void 0!==x?n(x.create({data:{}})):0)}function q(){void 0!==D&&(S.setUrl(D),H&&S.getList())}var S=this;Array.prototype.updateItems=function(e,t){void 0!==t&&Array.prototype.splice.apply(this,[e,t.length].concat(t))};var x,D,R,I=0,T=[],w=ko.observable(),F=ko.observable(),j=ko.observable(1),L=ko.observable(1),H=!0,J=5,N=!1,U=!0;S.request=void 0,O(),S.data=ko.observableArray([]),S.currentPage=ko.observable(1),S.entriesPerPage=ko.observable(J),S.totalEntries=ko.observable(0),S.isPageReloadRequired=ko.observable(!1),S.headers=ko.observableArray(),S.error=ko.observableArray(),S.loading=ko.observable(!1),S.filter=ko.observableArray(),S.appliedFilter=ko.observableArray(),S.columns=ko.observableArray(),S.sortOnly=ko.observable(!1),S.activeSort=ko.observableArray(),S.entries=ko.pureComputed(function(){var e=k();return S.data.slice(e,e+S.entriesPerPage())}),S.hasEntries=ko.pureComputed(function(){return S.totalEntries()>0}),S.totalPages=ko.pureComputed(function(){var e=Math.ceil(S.totalEntries()/S.entriesPerPage());return e>0?e:1}),S.previousEnabled=ko.pureComputed(function(){return 1!==S.currentPage()&&S.loading()===!1}),S.nextEnabled=ko.pureComputed(function(){return S.currentPage()!==S.totalPages()&&S.loading()===!1}),S.showAllEntriesEnabled=ko.pureComputed(function(){return S.totalEntries()>J&&S.loading()===!1}),S.showFirstEntriesEnabled=ko.pureComputed(function(){return S.hasEntries()&&S.totalEntries()>J&&S.loading()===!1}),S.firstEntriesCount=ko.pureComputed(function(){return S.totalEntries()<S.entriesPerPage()?S.totalEntries():J}),S.previousItemsCount=ko.pureComputed(function(){return J}),S.nextItemsCount=ko.pureComputed(function(){return S.totalPages()-S.currentPage()==1?S.totalEntries()-S.entriesPerPage()*(S.totalPages()-1):J}),S.loadedEntriesCount=ko.pureComputed(function(){var e=S.data(),t="function"==typeof e?e():e;return C(t)}),S.shownAll=ko.pureComputed(function(){return S.totalEntries()<=J?!1:S.entriesPerPage()>=S.totalEntries()}),S.totalEntriesOnNextPage=function(){return j()*L()},S.url=ko.pureComputed(function(){return w()}),S.queryOptions=ko.pureComputed(function(){return F()}),S.hasError=ko.pureComputed(function(){return 0!==S.error().length}),S.errorCode=ko.pureComputed(function(){return void 0!==S.error().jqXHR?S.error().jqXHR.status:null}),S.parserError=ko.pureComputed(function(){return void 0!==S.error().status?"parsererror"===S.error().status:!1}),S.firstPage=function(){j(1),a()},S.lastPage=function(){j(S.totalPages()),a()},S.next=function(){S.currentPage()<S.totalPages()&&(j(S.currentPage()+1),a())},S.previous=function(){S.currentPage()>1&&(j(S.currentPage()-1),a())},S.showFirstEntries=function(){j(1),L(J),a()},S.showAll=function(){j(1),L(S.totalEntries()),a()},S.sort=function(e,t,r){if(void 0!==S.columns()&&!(S.totalEntries()<=1)&&(void 0!==r?l(r):(l(t),e=c(t)),-1!==$.inArray(e,S.columns()))){var n={column:e,asc:!0};S.activeSort().column===e&&(n.asc=!S.activeSort().asc),S.activeSort(n),S.sortOnly(!0),a()}},S.setUrl=function(e){w(void 0!==e?e:D)},S.getList=function(e,t){j(1),l(t),a()},q()}}();